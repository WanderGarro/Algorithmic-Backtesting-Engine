from pandas import Series

class RSI:
    """–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–µ–∫—Å–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏–ª—ã (Relative Strength Index)"""
    @staticmethod
    def calculate(series: Series, window: int = 14) -> Series:
        """
        –í—ã—á–∏—Å–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏–ª—ã (RSI) - –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä, –∏–∑–º–µ—Ä—è—é—â–∏–π —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
        —Ü–µ–Ω–æ–≤—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å–ª–æ–≤–∏–π –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏.

        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            series (Series): –í—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞. –û–±—ã—á–Ω–æ —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è.
            window (int, optional): –ü–µ—Ä–∏–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ RSI (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 14)

        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
            Series: –ó–Ω–∞—á–µ–Ω–∏—è RSI –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 100.
                    –ó–Ω–∞—á–µ–Ω–∏—è –≤—ã—à–µ 70 –æ–±—ã—á–Ω–æ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å, –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∏–∂–µ 30 - –Ω–∞ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å.

        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
            üî¥ RSI > 70: –í–æ–∑–º–æ–∂–Ω–∞—è –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å, —Å–∏–≥–Ω–∞–ª –∫ –ø—Ä–æ–¥–∞–∂–µ
            üü¢ RSI < 30: –í–æ–∑–º–æ–∂–Ω–∞—è –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å, —Å–∏–≥–Ω–∞–ª –∫ –ø–æ–∫—É–ø–∫–µ
            –î–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è –º–µ–∂–¥—É RSI –∏ —Ü–µ–Ω–æ–π –º–æ–∂–µ—Ç –ø—Ä–µ–¥–≤–µ—â–∞—Ç—å —Ä–∞–∑–≤–æ—Ä–æ—Ç —Ç—Ä–µ–Ω–¥–∞

        –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
            RSI —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ: RSI = 100 - (100 / (1 + RS)),
            –≥–¥–µ RS = —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏—Ä–æ—Å—Ç/—Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥
        """
        delta = series.diff()
        gain = (delta.where(delta > 0, 0)).rolling(window=window).mean()
        loss = (-delta.where(delta < 0, 0)).rolling(window=window).mean()
        rs = gain / loss
        rsi = 100 - (100 / (1 + rs))
        return rsi